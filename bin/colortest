#!/usr/bin/perl -w
# Simple Perl test suite colorizer
# Jonathan Leto <jonathan@leto.net>
# Sat Feb 16 17:20:50 EST 2008 

# Example bash alias 
# function t () {
#        ./Build test --verbose 1 --test_files $1 |colortest
# }


use strict;
use Term::ANSIColor qw(:constants);
$Term::ANSIColor::AUTORESET = 1;

while (<>){
	my $line = $_;
	if(/^ok/ || /Result: PASS/ || /All tests successful/){
		print BOLD GREEN $line;
	} elsif( /^not ok/ || /Dubious/ || /Result: FAIL/ || /Bad plan/ || /Failed/ || /Non-zero exit status/ ){
		print BOLD RED $line;
	} elsif( /^1\.\.\d+/ || m!^t/.+! ){
		print BOLD BLUE $line;
	} elsif (/^Files=/){
		print BOLD MAGENTA  $line;
	} else {
		print BOLD $line;
	}
}
